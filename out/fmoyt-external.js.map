{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","main.js","libs/DOM.Barf.js","libs/chat_handlers/audio-speakz.js","libs/chat_handlers/background-changer.js","libs/chat_handlers/boatskip.js","libs/chat_handlers/drink-flair.js","libs/chat_handlers/hover-sound.js","libs/chat_handlers/misc-handlers.js","libs/chat_handlers/nick-class-applier.js","libs/embed-utils.js","libs/misc.js","libs/ui/misc-ui.js","libs/ui/mod-console.js","libs/ui/trivia-toggle.js","libs/utils/chat.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fmoyt-external.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","//Text Effect Libraries\r\n$.getScript(\"http://jschr.github.io/textillate/jquery.textillate.js\");\r\n$.getScript(\"http://www.crayola.com/application/javascript/libraries/jquery.lettering-0.6.1.min.js\");\r\n\r\n//Text HTML Manipulation Library\r\n$.getScript(\"http://benzap.github.io/DOM.Barf/DOM.Barf.js\");\r\n\r\n//Random Includes\r\n//TODO: Cleanup\r\nrequire(\"./libs/embed-utils.js\");\r\nrequire(\"./libs/misc.js\");\r\n\r\n//\r\n//UI Modifications\r\n//\r\nrequire(\"./libs/ui/mod-console.js\");\r\nrequire(\"./libs/ui/trivia-toggle.js\");\r\n\r\n//Miscellaneous UI Handlers\r\n// - NotifyBar\r\nrequire(\"./libs/ui/misc-ui.js\");\r\n\r\n\r\nvar ChatHandler = require(\"./libs/utils/chat.js\").ChatHandler;\r\n//\r\n//Chat Handlers\r\n//\r\nvar DrinkFlair = require(\"./libs/chat_handlers/drink-flair.js\");\r\nrequire(\"./libs/chat_handlers/audio-speakz.js\");\r\nrequire(\"./libs/chat_handlers/hover-sound.js\");\r\nrequire(\"./libs/chat_handlers/boatskip.js\");\r\nrequire(\"./libs/chat_handlers/background-changer.js\");\r\nrequire(\"./libs/chat_handlers/nick-class-applier.js\");\r\n\r\n//Miscellaneous Handlers\r\n// - VideoClick Playlist\r\n// - Middlescreen Removal\r\nrequire(\"./libs/chat_handlers/misc-handlers.js\");\r\n\r\n\r\n/**** Initialization and Global Variables ****/\r\nFMOYT = {};\r\nDOM = require(\"./libs/DOM.Barf.js\").DOM;\r\n\r\n//Chat Handler Initialization\r\nFMOYT.chatHandler = new ChatHandler();\r\nFMOYT.chatHandler.init();\r\n\r\n//Handlers\r\nFMOYT.chatHandler.add(\"drink-flair\", DrinkFlair.handler);\r\n\r\n\r\n//Redirect synchtube.me users to the new cytu.be site\r\nif (location.host == \"synchtube.me\" || location.host == \"www.synchtube.me\") {\r\n    location.href = location.protocol + \"//cytu.be\" + location.pathname;\r\n}\r\n\r\n//Create a custom event called 'external-load' that fires as soon as\r\n//this external javascript is done firing\r\nvar ExternalLoadEvent = document.createEvent('Event');\r\nExternalLoadEvent.initEvent(\"external-load\", true, true);\r\ndocument.dispatchEvent(ExternalLoadEvent);\r\n","/*\r\n  Despite the name, this is a useful and straightforward library for\r\n  generating a string representation from a composition of Barf functions\r\n\r\n  Example:\r\n\r\n  var _s = DOM.Barf;\r\n\r\n  //Standard barf, without shortcuts\r\n  var output = _s.SpitOut(\"div\", {}, [\r\n    _s.SpitOut(\"a\", {href: \"http://www.example.com\"}, [\r\n          _s.SpitOut(\"p\", {style: {fontSize: \"12px\"}}, [\r\n            \"Hello World!\"\r\n          ])\r\n    ])\r\n  ]);\r\n  console.log(output);\r\n\r\n  //example with shortcuts\r\n  var output = _s.div({}, [\r\n    _s.a({href: \"http://www.example.com\"}, [\r\n          _s.p({style: {fontSize: \"12px\"}}, [\r\n            \"Hello World!\"\r\n          ]),\r\n          _s.p({}, \"More hellos!\"),\r\n    ])\r\n  ]);\r\n  console.log(output);\r\n\r\n  //Example of injecting a style sheet into the head\r\n\r\n  document.head.innerHTML += _s.style(null, [\r\n    ToCss(\"body\", {\r\n      backgroundColor: \"#1d1d1d\",\r\n      position: \"relative\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n    })\r\n  ])\r\n\r\n  Dependencies:\r\n\r\n  - es5shim (IE9+ support)\r\n  - console shims\r\n\r\n*/\r\n\r\nvar DOM = DOM || {};\r\nDOM.Barf = DOM.Barf || {};\r\n\r\n(function(context) {\r\n    context.VERSION = \"0.2.1\";\r\n    \r\n    /*\r\n      This is the raw input method to barf / spit out a string\r\n      representation of XML. This forms the representation: \r\n      <tagName {parseTagAttributes()}>{parseTagChildren()}</tagName>\r\n\r\n      Keyword Arguments:\r\n\r\n      tagName -- the tag of our XML element\r\n      \r\n      tagAttributes -- a dictionary listing of XML attributes for the current tag\r\n\r\n      tagChildren -- a list of other DOM.Barf functions which are\r\n      concatenated to fill this current DOM string.\r\n\r\n      Optional Arguments:\r\n\r\n      bSingular -- whether the given XML element is singular. Namely,\r\n      it has a forward flash, and no children. ex. meta tags --> <meta /> \r\n      [default: false]\r\n\r\n      bConvertCamelCase -- determines whether attributes, and listed\r\n      attribute style's names are converted from camelcase is\r\n      converted to the equivalent dash-named, which is common in html\r\n      attributes. ex. EquivHtmlTerm --> equiv-html-term.\r\n      [default: true]\r\n\r\n    */\r\n    context.SpitOut = function(tagName, tagAttributes, tagChildren, options) {\r\n        //defaults for tag attributes\r\n        if (tagAttributes === undefined || tagAttributes === null) {\r\n            tagAttributes = {};\r\n        }\r\n        else if (typeof tagAttributes !== \"object\") {\r\n            console.warn(\"tag attributes does not form a dictionary: \", tagAttributes);\r\n            console.warn(\"removing attributes\");\r\n            tagAttributes = {};\r\n        }\r\n        \r\n        //defaults for tag children\r\n        if (tagChildren === undefined || tagChildren === null) {\r\n            tagChildren = \"\";\r\n        }\r\n        else if (typeof tagChildren !== \"object\" && typeof tagChildren !== \"string\") {\r\n            console.warn(\"tag children must be a list object: \", tagChildren);\r\n            console.warn(\"removing children\");\r\n            tagChildren = \"\";\r\n        }\r\n        \r\n        if (options === undefined) {\r\n            options = {};\r\n        }\r\n\r\n\t//determines if we treat the current element as a singular element.\r\n\t//this means we ignore the children, and put a forwards slash\r\n\t//example meta tags --> <meta />\r\n\toptions.bConvertCamelCase = (options.bConvertCamelCase !== undefined) ? (options.bConvertCamelCase) : true;\r\n\toptions.bSingular = (options.bSingular !== undefined) ? (options.bSingular) : false;\r\n\t\r\n        var attributesString = parseTagAttributes(tagAttributes, options);\r\n        var childrenString = parseTagChildren(tagChildren, options);\r\n\r\n\tif (options.bSingular) {\r\n\t    var startingTag = \"<\" + tagName + attributesString + \">\";\r\n\t    return startingTag;\r\n\t}\r\n\telse {\r\n\t    var startingTag = \"<\" + tagName + attributesString + \">\";\r\n\t    var endingTag = \"</\" + tagName + \">\";\r\n            return  startingTag + childrenString + endingTag;\r\n\t}\r\n    }\r\n    \r\n    /*\r\n      \r\n     */\r\n    var parseTagAttributes = function(attrs, options) {\r\n        var outputString = \"\";\r\n        for (var key in attrs) {\r\n            if (!attrs.hasOwnProperty(key)) continue;\r\n            \r\n            var value = attrs[key];\r\n            //if the value is a string, just concatenate\r\n            if (typeof value === \"string\") {\r\n\t\tkey = (options.bConvertCamelCase) ? convertCamelCaseToDashed(key) : key;\r\n                outputString += \" \" + key + \"=\" + \"\\\"\" + value + \"\\\"\";\r\n                continue;\r\n            }\r\n            //we treat an object as a css separated set of values for convenience\r\n            else if (typeof value === \"object\") {\r\n                cssOutput = parseCssOutput(value, options);\r\n                outputString += \" \" + key + \"=\" + \"\\\"\" + cssOutput + \"\\\"\";\r\n\t\tcontinue;\r\n            }\r\n\t    else if (value === null) {\r\n\t\toutputString += \" \" + key;\r\n\t    }\r\n\t    \r\n        }\r\n        \r\n        return outputString;\r\n    }\r\n\r\n    var parseCssOutput = function(attrs, options) {\r\n        var cssOutput = \"\";\r\n        for (var cssKey in attrs) {\r\n            if (!attrs.hasOwnProperty(cssKey)) continue;\r\n            \r\n            var cssValue = attrs[cssKey];\r\n\t    cssKey = (options.bConvertCamelCase) ? convertCamelCaseToDashed(cssKey) : cssKey;\r\n            cssOutput += cssKey + \":\" + cssValue + \";\";\r\n        }\r\n        return cssOutput;\r\n    }\r\n    \r\n    var parseTagChildren = function(children, options) {\r\n        if (typeof children === \"string\") {\r\n            return children;\r\n        }\r\n\t\r\n        //concatenate the children, assuming they're children\r\n        return children.reduce(function(a,b) {\r\n            return a + b;\r\n        }, \"\");\r\n    }\r\n\r\n    var convertCamelCaseToDashed = function(s) {\r\n        return s.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    }\r\n\r\n    var toSpit = function(tag, passedOptions) {\r\n\tpassedOptions = passedOptions || {};\r\n        return function(attrs, children, options) {\r\n\t    options = options || {};\r\n\t    for (key in passedOptions) {\r\n\t\tif (!passedOptions.hasOwnProperty(key)) continue;\r\n\t\tif (!options.hasOwnProperty(key)) {\r\n\t\t    options[key] = passedOptions[key];\r\n\t\t}\r\n\t    }\r\n            return context.SpitOut(tag, attrs, children, options);\r\n        };\r\n    }\r\n    context.toSpit = toSpit;\r\n    \r\n    /* bunch of DOM shortcut functions */\r\n    context.html = toSpit(\"html\");\r\n    context.head = toSpit(\"head\");\r\n    context.title = toSpit(\"title\");\r\n    context.body = toSpit(\"body\");\r\n    context.div = toSpit(\"div\");\r\n    context.h1 = toSpit(\"h1\");\r\n    context.h2 = toSpit(\"h2\");\r\n    context.h3 = toSpit(\"h3\");\r\n    context.h4 = toSpit(\"h4\");\r\n    context.h5 = toSpit(\"h5\");\r\n    context.img = toSpit(\"img\", {bSingular:true});\r\n    context.a = toSpit(\"a\");\r\n    context.b = toSpit(\"b\");\r\n    context.span = toSpit(\"span\");\r\n    context.p = toSpit(\"p\");\r\n    context.input = toSpit(\"input\");\r\n    context.button = toSpit(\"button\");\r\n    context.table = toSpit(\"table\");\r\n    context.tr = toSpit(\"tr\");\r\n    context.td = toSpit(\"td\");\r\n    context.li = toSpit(\"li\");\r\n    context.ul = toSpit(\"ul\");\r\n    context.style = toSpit(\"style\");\r\n    context.script = toSpit(\"script\");\r\n    context.meta = toSpit(\"meta\", {bSingular:true});\r\n\r\n    /* Small Function for performing the stylesheet output */\r\n    context.ToCss = function(name, attrs) {\r\n\tvar options = { bConvertCamelCase: true };\r\n        return name + \" {\" + parseCssOutput(attrs, options) + \"} \";\r\n    }\r\n\r\n    /*\r\n      simply concatenates the list of children\r\n     */\r\n    context.ToRaw = function(children) {\r\n\treturn parseTagChildren(children);\r\n    }\r\n\r\n    /*\r\n      Merges the object attributes from b into a\r\n     */\r\n    context.Merge = function(a, b) {\r\n        for (key in b) {\r\n            if (b.hasOwnProperty(key)) {\r\n                if (typeof a[key] == \"object\" && typeof b[key] == \"object\") {\r\n                    a[key] = context.Merge(a[key], b[key]);\r\n                }\r\n                else {\r\n                    a[key] = b[key];\r\n                }\r\n            }\r\n        }\r\n\treturn a;\r\n    }\r\n\r\n    context.ToDOMNode = function(s) {\r\n\tvar wrapper = document.createElement(\"div\");\r\n\twrapper.innerHTML = s;\r\n\treturn wrapper.firstChild;\r\n    }\r\n    \r\n})(DOM.Barf);\r\n\r\nmodule.exports = {\r\n    DOM: DOM\r\n};\r\n","\r\nif ($('#stopaudiobutton').length != 0){\r\n    return;\r\n}\r\nelse {\r\n    $('#leftcontrols').prepend('<span class=\"btn btn-sm btn-default\" style=\"float: right;\" id=\"stopaudiobutton\">Stop Audio</span>');\r\n    $( \"#stopaudiobutton\" ).click(function() {\r\n\tvar audioElements = document.getElementsByTagName('audio');\r\n\tfor(var i = 0; i < audioElements.length; ++i){\r\n\t    audioElements[i].pause();\r\n\t}\r\n    }); \r\n}\r\n\r\nfunction speakz2() {\r\n    if (!$('.speakz2').length){\r\n\treturn;\r\n    }\r\n    if (!$('.spenabled2').length) {\r\n\treturn;\r\n    }\r\n\r\n    var moobs=new Audio(\"http://webanywhere.cs.washington.edu/cgi-bin/espeak/getsound.pl?lang=english&text=\"+encodeURI($(\".speakz2\").last().text()));\r\n    moobs.volume=.4;\r\n    moobs.play();\r\n    $(\".speakz2\").removeClass();\r\n}\r\n\r\naddsptoggle();\r\nfunction addsptoggle() {\r\n    if ($('#sptoggle2').length) {\r\n\treturn;\r\n    }\r\n    $('#leftcontrols').prepend('<span class=\"btn btn-sm btn-default\" style=\"float: right;\" id=\"sptoggle2\">ENABLE SPEAK</span>');\r\n    $( \"#sptoggle2\" ).click(function() {\r\n\t$(this).toggleClass(\"spenabled2\");\r\n    });\r\n}\r\n\r\nsocket.on(\"chatMsg\", function() {\r\n    speakz2(); \r\n})\r\n\r\nmodule.exports = {\r\n    \r\n}\r\n","b3g3();\r\nfunction b3g3(){\r\n    $('#messagebuffer').css(\"background-image\",\"url(\"+$('.b3g3:last').text()+\")\");\r\n}\r\n\r\nsocket.on(\"chatMsg\", function() {\r\n    b3g3();\r\n});\r\n","\r\n\r\nsocket.on(\"chatMsg\", function() {\r\n    $('#boatskip').click(function() {\r\n\tsocket.emit(\"voteskip\")\r\n    });\r\n});\r\n\r\nmodule.exports = {\r\n\r\n};\r\n","/*\r\n  Drink Flair and chatMsg fixes\r\n */\r\nvar DOM = require(\"../DOM.Barf.js\").DOM;\r\nvar _s = DOM.Barf;\r\n_s.span = _s.toSpit(\"span\");\r\n\r\nvar __drinkCount = 0;\r\n\r\nsocket.on(\"drinkCount\", function(count) {\r\n    __drinkCount = count;\r\n    /*\r\n      $('#drinkbar h1 span').remove();\r\n      lelcat = $('#drinkbar h1').text().replace('drinks','');\r\n      $('#drinkbar h1').text(lelcat);\r\n      lelcat = $('#drinkbar h1').text().replace('drink','');\r\n      $('#drinkbar h1').text(lelcat);\r\n      $('#drinkbar h1').append($('.drink span').last().clone());\r\n      $('#drinkbar h1 span').append(\"<img src='http://i.imgur.com/gFQutcV.gif' />\");\r\n    */\r\n});\r\n\r\nvar __timeoutHandler = null;\r\nvar handler = function(data) {\r\n    var div = data.div;\r\n    if ($(div).hasClass(\"drink\")) {\r\n\tvar msg = data.msg || \"\";\r\n\r\n\t//more specific case when using /drink. This corrects it to act like /d\r\n\tvar re_drink = /^(rink|drink) (.*)$/\r\n\tif (msg.match(re_drink)) {\r\n\t    var m = msg.match(re_drink);\r\n\r\n\t    msg = m[2];\r\n\t}\r\n\r\n\tvar spanText = div.querySelectorAll(\"span\")[2];\r\n\tspanText.innerHTML = msg;\r\n\r\n\t//apply to header\r\n\tvar drinkBar = document.querySelector(\"#drinkcount\");\r\n\tvar innerContent = _s.ToRaw([\r\n\t    _s.span({\"class\": \"drink\"}, [\r\n\t\t__drinkCount.toString() + \" 🍺 \",\r\n\t\tmsg,\r\n\t\t_s.img({src: \"http://i.imgur.com/gFQutcV.gif\"})\r\n\t    ]),\r\n\t]);\r\n\tdrinkBar.innerHTML = innerContent;\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    handler: handler,\r\n};\r\n","hoverSound();\r\nfunction hoverSound() {\r\n    socket.on(\"chatMsg\", function(args) {\r\n\tvar sucko = $('.hoversound7').last().text();\r\n\tvar soundlink = 'http://' + sucko;\r\n\t$('.hoversound7').last().parent().append('<audio id=\"gifaudio\"><source src=\"'+soundlink+'\" type=\"audio/mpeg\">');\r\n\r\n\t$('#gifaudio').parent().append('<img src=\"http://i.imgur.com/4XgmiHM.png\" height=\"20px\"/>');\r\n\t$('#gifaudio').parent().on('click', function() {\r\n\t    var boobs = $(this).find('audio');\r\n\t    boobs[0].volume=.4;\r\n\t    boobs[0].play();\r\n\t});\r\n\t$('.hoversound7').remove();\r\n\t$('#gifaudio').attr('id','giffedaudio');\r\n\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n\r\n};\r\n","\r\n//Prevent Users from clicking on video URLs in the playlist\r\nvideoclick();\r\nfunction videoclick() {\r\n    if (CLIENT.rank >= 2) {    \r\n        $(\"#queue\").css(\"pointer-events\",\"visible\");\r\n    }\r\n    else { \r\n\t$(\"#queue\").css(\"pointer-events\",\"none\");          \r\n    }\r\n    \r\n    $(\"#videowrap\").css(\"pointer-events\",\"auto\");\r\n}\r\n\r\n//Remove some middle screen thing... IDK\r\nremovemiddlescreen();\r\nfunction removemiddlescreen(){\r\n    socket.on(\"chatMsg\", function() {\r\n\tif ($('.removemiddlescreen').length > 0) {\r\n\t    $('.middlescreen, .removemiddlescreen').remove();\r\n\t}\r\n    });\r\n}\r\n\r\nsocket.on(\"chatMsg\", function() {\r\n    $('#memers3').click(function() {\r\n\tsocket.emit(\"chatMsg\", {\"msg\":\":dankredhat:\"});\r\n\t$('#memers3').remove();\r\n    });\r\n});\r\n\r\n\r\nmodule.exports = {\r\n    \r\n};\r\n","//apply username classes to usernames, hook this to chatMsg so it refreshes\r\nclassApplier();\r\nfunction classApplier() {\r\n    $('.userlist_item span:nth-child(2)').each(function() {\r\n\t$(this).addClass($(this).text())\r\n    });\r\n    \r\n    $('.username').each(function() {\r\n\t$(this).addClass($(this).text().slice(0,-2))\r\n    })\r\n\t}\r\n\r\n//hook into the chatMsg frame\r\nsocket.on(\"chatMsg\", function() {\r\n    classApplier();\r\n});\r\n\r\nmodule.exports = {\r\n\r\n};\r\n","function parse_VideoEmbeds() {\r\n    $(\"img.webm\").each(function(index) {\r\n        var img2vid = this;\r\n        var newElement = $(\"<video>\")\r\n\t    .attr(\"preload\", \"\")\r\n\t    .attr(\"controls\", \"\")\r\n\t    .attr(\"muted\", \"\")\r\n\t    .attr(\"webkit-playsinline\", \"\")\r\n\t    .text(\"Your browser does not support the video tag.\");\r\n\t\r\n        var source = $(this).attr(\"src\");\r\n        if ($(this).hasClass(\"imgur\")) {\r\n            $(this).removeAttr(\"src\");\r\n            source = source.split(\".\").reverse().splice(1).reverse().join(\".\");\r\n            newElement.append('<source src=\"' + source + \".mp4\" + '\" type=\"video/mp4\">')\r\n\t\t.append('<source src=\"' + source + \".webm\" + '\" type=\"video/webm\">')\r\n        }\r\n\t\r\n        if (typeof $(this).attr(\"data-autoplay\") == \"string\") {\r\n            newElement.attr(\"autoplay\");\r\n            newElement[0].autoplay = true;\r\n            $(this).removeAttr(\"data-autoplay\")\r\n        }\r\n\t\r\n        if (typeof $(this).attr(\"data-loop\") == \"string\") {\r\n            newElement.attr(\"loop\");\r\n            newElement[0].loop = true;\r\n            $(this).removeAttr(\"data-loop\")\r\n        }\r\n\t\r\n        attrs = null;\r\n        $.each(this.attributes, function(index) {\r\n            $(newElement).attr(img2vid.attributes[index].name, img2vid.attributes[index].value)\r\n        });\r\n        $(this).after(newElement).remove()\r\n    })\r\n}\r\n\r\nfunction parse_SoundEmbeds(args) {\r\n    $(\".sound-embed:not(.parsed)\").each(function(index) {\r\n        var self = $(this);\r\n        var path = self.attr(\"data-path\");\r\n        var proto = self.attr(\"data-proto\");\r\n        self.addClass(\"parsed\").append($(\"<audio>\").append($(\"<source>\").attr(\"src\", proto + path).attr(\"type\", \"audio/mpeg\")).prop(\"volume\", .4).on(\"play\", function() {\r\n            $(this).siblings(\"button\").addClass(\"btn-success\").removeClass(\"btn-default btn-warning\").html('<span class=\"glyphicon glyphicon-pause\"></span>').attr(\"title\", \"Click to pause\")\r\n        }).on(\"pause\", function() {\r\n            $(this).siblings(\"button\").addClass(\"btn-warning\").removeClass(\"btn-default btn-success\").html('<span class=\"glyphicon glyphicon-play\"></span>').attr(\"title\", \"Click to resume\")\r\n        }).on(\"ended\", function() {\r\n            $(this).siblings(\"button\").addClass(\"btn-default\").removeClass(\"btn-success btn-warning\").html('<span class=\"glyphicon glyphicon-play\"></span>').attr(\"title\", \"Click to play\")\r\n        })).append($(\"<button>\").addClass(\"btn btn-sm btn-default playsound\").attr(\"title\", \"Click to play\").html('<span class=\"glyphicon glyphicon-play\"></span>').on(\"click\", function() {\r\n            var sound = $(this).siblings(\"audio\")[0];\r\n            if (sound.paused) {\r\n                sound.play()\r\n            } else {\r\n                sound.pause()\r\n            }\r\n        })).show();\r\n        if (self.hasClass(\"autoplay\")) {\r\n            self.children(\"audio\").attr(\"autoplay\", true)\r\n        }\r\n    })\r\n}\r\nif (!CHANNEL.mediaListeners) {\r\n    CHANNEL.mediaListeners = socket.on(\"chatMsg\", function() {\r\n        parse_SoundEmbeds();\r\n        parse_VideoEmbeds()\r\n    });\r\n    parse_SoundEmbeds();\r\n    parse_VideoEmbeds()\r\n}\r\n\r\nmodule.exports = {\r\n\r\n}\r\n","$(\".navbar-brand\").text(\"Full Movies\");\r\n\r\nvar movieLengthSeconds = 6545; //length of the movie in seconds\r\nvar startTime = 1379961181053; //paste the time you get from the time now button\r\n\r\nif (document.getElementById(\"countdown\")) {\r\n    var element = document.getElementById(\"countdown\");\r\n    element.parentNode.removeChild(element);\r\n    element = document.getElementById(\"timebutton\");\r\n    element.parentNode.removeChild(element);\r\n}\r\n\r\nvar countdown = $(\"<div/>\")\r\n    .addClass(\"hasCountdown\")\r\n    .attr(\"id\", \"countdown\")\r\n    .appendTo(\"#videowrap\");\r\n\r\nvar getTimeButton = $(\"<button/>\").attr(\"id\", \"timebutton\")\r\n    .addClass(\"btn btn-small\")\r\n    .click(function () {\r\n        alert(new Date().getTime() + 10000);\r\n    })\r\n    .text(\"Get system time\")\r\n    .appendTo(\"#qualitywrap\");\r\n\r\nhideStuff();\r\nfunction hideStuff() {\r\n    socket.on(\"channelOpts\", function() {\r\n\tif (CLIENT.rank >= 2) {\r\n            $(\"#librarytoggle\").css(\"display\",\"inherit\");\r\n            getTimeButton.css(\"display\",\"inline\");\r\n\t}\r\n\telse { \r\n\t    $(\".qe_title\").contents().unwrap();\r\n\t    $(\"A.qe_title\").contents().unwrap();\r\n\t    $(\"#librarytoggle\").css(\"display\",\"none\");\r\n\t    getTimeButton.css(\"display\", \"none\");\r\n\t}\r\n    });\r\n}\r\n\r\nvar endTime = startTime + (movieLengthSeconds * 1000);\r\n\r\nvar t = setInterval(timer, 1000);\r\nfunction timer() {\r\n    if (movieLengthSeconds <= 0 || new Date().getTime() >= endTime) {\r\n        clearInterval(t);\r\n        countdown.text(\"Not set\");\r\n        return;\r\n    }\r\n    time = new Date();\r\n    var timeNow = time.getTime();\r\n    var newTime = Math.abs(Math.round((startTime - timeNow) / 1000));\r\n    movieLengthSeconds = newTime - 1;\r\n    var hours = Math.floor(newTime / 3600);\r\n    var minutes = Math.floor(newTime / 60);\r\n    var seconds = newTime - minutes * 60;\r\n    if (movieLengthSeconds >= 3600) {\r\n        var minusHours = newTime - hours * 3600;\r\n        minutes = Math.floor(minusHours / 60);\r\n        seconds = minusHours - minutes * 60;\r\n        countdown.text(\"Current time: \" + hours + \" hours \" + minutes +\" minutes \" + seconds + \" seconds\");\r\n    }\r\n    else if (movieLengthSeconds >= 60) {\r\n        countdown.text(\"Current time: \" + minutes + \" minutes  \" + seconds + \" seconds\");\r\n    }\r\n    else {\r\n        countdown.text(\"Current time: \" + movieLengthSeconds + \" seconds\");\r\n    }\r\n}\r\n\r\n\r\n(function(i, s, o, g, r, a, m) {\r\n    i['GoogleAnalyticsObject'] = r;\r\n    i[r] = i[r] || function() {\r\n\t(i[r].q = i[r].q || []).push(arguments)\r\n    }, i[r].l = 1 * new Date();\r\n    a = s.createElement(o),\r\n    m = s.getElementsByTagName(o)[0];\r\n    a.async = 1;\r\n    a.src = g;\r\n    m.parentNode.insertBefore(a,m)\r\n})(window,document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\r\n\r\nga('create', 'UA-39666007-2', 'cytu.be');\r\nga('send', 'pageview');\r\n\r\n\r\naddWallet();\r\nfunction addWallet() {\r\n    if ($('.perdclick').length == 0) { // if element not there, bitch\r\n        var objTo = document.getElementById('leftcontrols')\r\n        var modspan = document.createElement(\"span\");\r\n        var uname = CLIENT.name;\r\n        modspan.innerHTML = \"<a href='#openModal' class='perdclick btn btn-sm btn-default'>Leaderboard</a><div id='openModal' class='modalDialog'><div> <a href='#_' class='perdclose'></a> <iframe id='perdframe' src='http://192.241.120.73/perdcoins/perdcoins.php?uname=\" + uname + \"' width='349' height='508' scrolling='no' resizeable='0' frameborder='0' ></iframe><img class='perd' src='http://i.imgur.com/n1DGiyL.png' alt='' width='120' height='120'><img class='perd2' src='http://i.imgur.com/n1DGiyL.png' alt='' width='120' height='120'></div></div>\"\r\n        objTo.appendChild(modspan);\r\n    }\r\n}  \r\n\r\n$(\".perdclick\").click(function() {\r\n    $('#perdframe').attr('src', function (i, val) {\r\n\treturn val;\r\n    });\r\n});\r\n\r\n//wzrd I changed this to do opposite because it was F'ing up  \r\ndisplayShowSearch();\r\nfunction displayShowSearch() {\r\n    socket.on(\"channelOpts\", function() {\r\n\tif (CLIENT.rank < 2) {    \r\n\t    $(\"#showsearch\").hide();\r\n\t}\r\n    });\r\n} \r\n\r\nfunction sucko() {\r\n    var fek = $('.b3g3:last').text();\r\n    if (fek.length > 1) {\r\n\tfek2 = \"url('\" + fek +\"')\";\r\n    }\r\n    else {\r\n\tfek2 = \"none\"\r\n    }\r\n    $(\"#messagebuffer\").css(\"background-image\",fek2);\r\n}\r\n\r\nfunction webmVideo() {\r\n    var widgetHTML = $('span.vid').text();\r\n    $('span.vid').html('<video src=\"'+widgetHTML+'\" controls></video>');\r\n    $('span.vid').addClass('convertedvid').removeClass('vid');\r\n}\r\n\r\ndizzflair();\r\nfunction dizzflair() {\r\n    socket.on(\"chatMsg\", function() {\r\n\tsucko();\r\n\twebmVideo();\r\n\t$('.channel-emote').prop('title', '');\r\n\t$('.userlist_owner:contains(\"wzrd\")').addClass('wizz');\r\n\t$('.username:contains(\"wzrd\")').addClass('wizz');\r\n\t$('.imp').parent().parent().find('.wizz').remove();\r\n\t$('.username:contains(\"blankoid\")').remove();\r\n\t$('.userlist_owner:contains(\"csagan\")').addClass('csagan');\r\n\t$('.username:contains(\"csagan\")').addClass('csagan');\r\n\t$('.userlist_op:contains(\"mikmik\")').addClass('mikmik');\r\n\t$('.username:contains(\"mikmik\")').addClass('mikmik');\t\r\n    });\r\n}\r\n\r\n// Close Drink Start\r\n\r\n$(document).ready(function(){\r\n    $('#drinkbar').prepend('<button id=\"drinkclosebtn\">X</button>');\r\n});\r\n\r\n//\r\nvar button = document.getElementById('drinkclosebtn');\r\nbutton.onclick = function() {\r\n    var div = document.getElementById('drinkbarwrap');\r\n    if (div.style.display !== 'none') {\r\n        div.style.display = 'none';\r\n    }\r\n};\r\n\r\n// Close Drink End\r\n\r\nmodule.exports = {\r\n    \r\n};\r\n","//Adds Notify Bar area for scrolling text\r\nappendNotifybar();\r\nfunction appendNotifybar() {\r\n    if( $('#notifybar').length == 0 ) {\r\n\t$('#chatheader').append('<span id=\"notifybar\"></span>');\r\n    }\r\n\r\n    if( $('#notifymarquee').length == 0 ) {\r\n\t$('#notifybar').append('<marquee id=\"notifymarquee\" behavior=\"scroll\" direction=\"left\"></marquee>');\r\n    }\r\n}\r\n\r\n//IDK what this does...\r\n$('#newpollbtn').click(function () {\r\n    $(\"#pollwrap .checkbox input[type=checkbox]\").attr(\"checked\", true);\r\n});\r\n\r\nmodule.exports = {\r\n\r\n};\r\n","/*\r\n  Includes all of the code for setting up the mod console\r\n*/\r\n\r\naddModconsole();\r\nfunction addModconsole() {\r\n    if (CLIENT.rank >= 2 && $('#modconsole').length == 0) {\r\n\tvar unamed = CLIENT.name;\r\n\tvar moddiv = \"<div id='modconsole'><div id='modopentab'><img src='http://i.imgur.com/ln3Ser1.png' style='vertical-align: -2px;opacity: 0.8;'> FMOYT Mod Console<iframe src='http://192.241.120.73/con/lastmsg/lastmsg.php' style='height:20px; width:40%;float:right;border:none;' scrolling='no'></iframe></div><div id='modtabs'><ul><li><a href='#a'><img src='http://i.imgur.com/CPxO4hE.png' style='vertical-align: -2px;opacity: 0.4;height: 14px;'> Mod Notes</a></li><li><a href='#b' class='logclick'><img src='http://i.imgur.com/goTiGiB.png' style='height: 14px;vertical-align: -2px;opacity: 0.5;'> Movie Log</a></li><li><a href='#c' class='linkclick'><img src='http://i.imgur.com/8ww6lKl.png' style='height: 16px;vertical-align: -5px;'> Movie Links</a></li><li><a href='#d' class='motdclick'><img src='http://i.imgur.com/Qp54UA7.png' style='height: 14px;vertical-align: -3px;opacity: 1;'> MOTD</a></li><li><a href='#e' class='imdbclick'><img src='https://cdn1.iconfinder.com/data/icons/jigsoar-icons/16/_search.png' style='height: 14px;vertical-align: -3px;opacity: 1;'> IMDB</a></li><li><a href='#f' class='guideclick'><img src='https://cdn3.iconfinder.com/data/icons/iconic-1/32/info-16.png' style='height: 14px;vertical-align: -2px;opacity: 1;'> Secret Bot Commands</a></li><li><a href='#g' class='guideclick' class='calendarclick'><img src='https://cdn3.iconfinder.com/data/icons/iconic-1/32/info-16.png' style='height: 14px;vertical-align: -2px;opacity: 1;'> Movie Night Calendar</a></li></ul><div id='a'><iframe height='100%' width='100%' frameborder='0' src='http://192.241.120.73/con/chat/chat.php?uname=\" + unamed + \"'style='border:none;' scrolling='no'></iframe></div><div id='b'><iframe id='logframe' height='100%' width='100%' frameborder='0' src='http://192.241.120.73/con/movielog/update.php?uname=\" + unamed + \"'style='border:none;'></iframe></div><div id='c'><iframe id='linkframe' height='100%' width='100%' frameborder='0' src='http://192.241.120.73/con/linklist/update.php?uname=\" + unamed + \"'style='border:none;'></iframe></div><div id='d'><iframe id='motdframe' height='100%' width='100%' frameborder='0' src='https://dl.dropboxusercontent.com/s/36o7pblbxifofm6/banner.html' style='border:none;'></iframe></div><div id='e'><iframe id='imdbframe' height='100%' width='100%' frameborder='0' src='http://192.241.120.73/con/imdbsearch/index.html' style='border:none;'></iframe></div><div id='f'><iframe height='100%' width='100%' frameborder='0' src='http://192.241.120.73/con/guidelines/index.html'style='border:none;' scrolling='no'></iframe></div><div id='g'><iframe id='calendarframe' height='100%' width='100%' frameborder='0' src='http://teamup.com/ksf2883bd29e015cbc'style='border:none;' scrolling='yes'></iframe></div></div></div>\";\r\n\t$( \"#pmbar\" ).after(moddiv);\r\n\t$(\"#pmbar\").addClass(\"modpmbar\");\r\n\t$(\"#modtabs\").tabs();\r\n\t$( \"#modopentab\" ).click(function() {\r\n\t    var modtabs = $( \"#modtabs\" );\r\n\t    if (modtabs.is( \":visible\" )){\r\n\t\t\r\n\t\tmodtabs.slideUp( 200 );\r\n                \r\n\t\t\r\n\t    } else {\r\n\t\tmodtabs.slideDown( 200 );\r\n\t    }\r\n\t});\r\n\r\n\t$( \".logclick\" ).click(function() {\r\n\t    $( \"#logframe\" ).attr( 'src', function ( i, val ) { return val; });\r\n\t}); \r\n\r\n\t$( \".linkclick\" ).click(function() {\r\n\t    $( \"#linkframe\" ).attr( 'src', function ( i, val ) { return val; });\r\n\t}); \r\n\r\n\t$( \".motdclick\" ).click(function() {\r\n\t    $( \"#motdframe\" ).attr( 'src', function ( i, val ) { return val; });\r\n\t}); \r\n\r\n\t$( \".calendarclick\" ).click(function() {\r\n\t    $( \"#calendarframe\" ).attr( 'src', function ( i, val ) { return val; });\r\n\t}); \r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    \r\n};\r\n","/*\r\n  Trivia Toggle Button\r\n */\r\n\r\nHideShadowMute();\r\nfunction HideShadowMute() {\r\n    var objTo = document.getElementById('leftcontrols')\r\n    var modspan = document.createElement(\"span\");\r\n    modspan.innerHTML = \"<button id='trivtog' class='btn btn-sm btn-default'>  Trivia/Jumble: On</button>\"\r\n    objTo.appendChild(modspan);\r\n}\r\n\r\n$(\"#trivtog\").click((function() {\r\n    var interId = null;\r\n    var $ul = $(\"#timet ul\");\r\n    return function(e) {\r\n        if (interId) {\r\n            $(this).text(\"Trivia/Jumble: On\");\r\n            clearInterval(interId);\r\n            interId = null;\r\n\t    $(\".hiddenbotchat\").attr('class', 'shownbotchat');\r\n        }\r\n\telse {\r\n            $(this).text(\"Trivia/Jumble: Off\");\r\n            interId = setInterval(function() {\r\n\t\t$('.botchat').parent().parent('div').attr('class', 'hiddenbotchat');\r\n            }, 1);        \r\n        }\r\n    };\r\n}()));\r\n","/*\r\n  Includes a set of utility functions for manipulating and handling\r\n  chat\r\n*/\r\n\r\n//Maintain a reference to the old chat handler\r\nvar _oldChatHandler = Callbacks.chatMsg;\r\n\r\nvar ChatHandler = function(options) {\r\n    this.handlers = [];\r\n}\r\n\r\n/*\r\n  ChatHandler wraps the main socket.on(\"chatMsg\", ...) callback so\r\n  that there is finer control over chat messages being placed in the\r\n  message buffer.\r\n */\r\nChatHandler.prototype.init = function(options) {\r\n    //Replacing old chat handler with a modified one, so we can grab\r\n    //the latest dom element with full assurance\r\n    Callbacks.chatMsg = function(data) {\r\n\t_oldChatHandler(data);\r\n\r\n\t//grab the latest element placed on the message buffer\r\n\tvar messageBuffer = document.getElementById(\"messagebuffer\");\r\n\tvar divChatList = messageBuffer.querySelectorAll(\"div\")\r\n\tvar divChat = divChatList[divChatList.length-1];\r\n\r\n\t//place the div in the data\r\n\tdata.div = divChat;\r\n\t\r\n\t//only call stuff on enabled handlers\r\n\tvar enabledHandlers = this.handlers.filter(function(handler) {\r\n\t    return handler.enabled;\r\n\t});\r\n\t\r\n\tenabledHandlers.forEach(function(handler) {\r\n\t    handler.func(data);\r\n\t});\r\n    }.bind(this);\r\n}\r\n\r\n/*\r\n  Add a handler to the list of chat handlers\r\n\r\n  Keyword Arguments:\r\n  \r\n  handlerName -- The name you wish to give the chat handler.\r\n\r\n  handlerFunction -- a function of the form function(data), where data\r\n  is an object containing the key-values:\r\n\r\n    div - the div object for this particular chat message\r\n    meta - contains the key-val 'modflair', which is a users rank\r\n    msg - the text message contained in the chat message\r\n    time - time at which the chat message was made\r\n    username - the user who made the chat message\r\n\r\n  Optional Arguments:\r\n\r\n  bEnabled -- if set to false, will add the handler and disable it\r\n  [default: true]\r\n\r\n  Remarks: \r\n\r\n  - Handlers are stored in a list so you can maintain order\r\n  \r\n  Gotchas:\r\n\r\n  - removing the div from the dom while several handlers are\r\n    manipulating the dom could lead to some strange results.\r\n*/\r\nChatHandler.prototype.add = function(handlerName, handlerFunction, options) {\r\n    var options = options || {};\r\n    var bEnabled = (options.bEnabled == false) ? false : true;\r\n    \r\n    this.handlers.push({\r\n\tname: handlerName,\r\n\tfunc: handlerFunction,\r\n\tenabled: true,\r\n    });\r\n}\r\n\r\n/*\r\n  Removes all handlers by the given name\r\n */\r\nChatHandler.prototype.removeByName = function(handlerName) {\r\n    this.handlers = this.handlers.filter(function(handler) {\r\n\treturn handler.name !== handlerName;\r\n    });\r\n}\r\n\r\n/*\r\n  Enable a handler, so it will be executed on the 'chatMsg' \r\n*/\r\nChatHandler.prototype.enable = function(handlerName) {\r\n    this.handlers.forEach(function(handler) {\r\n\tif (handlerName == handler.name) {\r\n\t    handler.enabled = true;\r\n\t}\r\n    });\r\n}\r\n\r\n/*\r\n  Disable a handler, so it will be executed on the 'chatMsg'\r\n*/\r\nChatHandler.prototype.disable = function(handlerName) {\r\n    this.handlers.forEach(function(handler) {\r\n\tif (handlerName == handler.name) {\r\n\t    handler.enabled = false;\r\n\t}\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n    ChatHandler: ChatHandler,\r\n}\r\n"]}